<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>3D –¶–∏–ª–∏–Ω–¥—Ä + –ú–∞–≥–∞–∑–∏–Ω –∏ –ó–∞–¥–∞–Ω–∏—è</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap');

  body, html {
    margin: 0; padding: 0; height: 100%;
    background: linear-gradient(135deg, #667eea, #764ba2);
    font-family: 'Montserrat', sans-serif;
    color: white;
    user-select: none;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  #score {
    margin: 20px 0 10px 0;
    font-size: 2rem;
    text-shadow: 0 0 8px rgba(0,0,0,0.5);
  }

  .cylinder-container {
    perspective: 1200px;
    width: 200px;
    height: 200px;
    position: relative;
  }

  .cylinder {
    width: 150px;
    height: 150px;
    position: absolute;
    top: 25px;
    left: 25px;
    transform-style: preserve-3d;
    animation: spin 8s linear infinite;
  }

  @keyframes spin {
    from { transform: rotateX(0deg) rotateY(0deg); }
    to { transform: rotateX(360deg) rotateY(360deg); }
  }

  .face {
    position: absolute;
    width: 100px;
    height: 40px;
    left: 25px;
    top: 55px;
    background: linear-gradient(135deg, #f6d365, #fda085);
    border-radius: 20px;
    box-shadow: inset 0 0 10px #fff8cc, 0 6px 15px rgba(253,160,133,0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: 700;
    font-size: 1.5rem;
    color: #4a2c00;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.3s ease;
  }

  .face:hover {
    background: linear-gradient(135deg, #fbd786, #f7797d);
    transform: scale(1.1);
  }

  .face.active {
    background: #ffce00;
    color: #3a2600;
    transform: scale(1.3);
    box-shadow: 0 0 15px #ffce00;
  }

  .buttons-container {
    margin-top: 180px;
    display: flex;
    gap: 20px;
  }

  button.btn {
    background: linear-gradient(135deg, #43cea2, #185a9d);
    border: none;
    padding: 12px 24px;
    color: white;
    font-weight: 700;
    border-radius: 30px;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    font-size: 1.1rem;
    transition: background 0.3s ease, transform 0.2s ease;
  }
  button.btn:hover {
    background: linear-gradient(135deg, #60d39f, #2374bf);
    transform: scale(1.05);
  }

  .overlay {
    position: fixed;
    bottom: 0; left: 0; right: 0;
    background: rgba(0,0,0,0.85);
    color: #fff;
    max-height: 300px;
    overflow-y: auto;
    padding: 20px;
    display: none;
    flex-direction: column;
    z-index: 1000;
  }
  .overlay.visible {
    display: flex;
  }

  .close-btn {
    background: transparent;
    border: none;
    color: #fff;
    font-size: 2rem;
    font-weight: 700;
    cursor: pointer;
    align-self: flex-end;
    margin-bottom: 10px;
  }

  ul {
    list-style: none;
    padding: 0;
    margin: 10px 0 0 0;
  }

  li {
    margin-bottom: 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    padding: 8px 12px;
    border-radius: 15px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  }

  li button {
    background: #fff;
    color: #333;
    border: none;
    padding: 6px 12px;
    border-radius: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  li button:hover {
    background-color: #e0e0e0;
  }

  form {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
  }
  form input {
    flex: 1;
    padding: 8px 12px;
    border-radius: 12px;
    border: none;
    font-size: 1rem;
  }
  form button {
    background: #4facfe;
    color: white;
    border: none;
    padding: 8px 20px;
    border-radius: 12px;
    font-weight: 700;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  form button:hover {
    background-color: #00f2fe;
  }
</style>
</head>
<body>

  <div id="score">–û—á–∫–∏: 0</div>

  <div class="cylinder-container">
    <div class="cylinder" id="cylinder"></div>
  </div>

  <div class="buttons-container">
    <button id="shop-btn" class="btn">–ú–∞–≥–∞–∑–∏–Ω üõí</button>
    <button id="tasks-btn" class="btn">–ó–∞–¥–∞–Ω–∏—è üìã</button>
  </div>

  <!-- –ú–∞–≥–∞–∑–∏–Ω -->
  <div id="shop-overlay" class="overlay" aria-hidden="true">
    <button id="close-shop" class="close-btn" aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–∞–≥–∞–∑–∏–Ω">&times;</button>
    <h2>–ú–∞–≥–∞–∑–∏–Ω</h2>
    <ul id="shop-list"></ul>
  </div>

  <!-- –ó–∞–¥–∞–Ω–∏—è -->
  <div id="tasks-overlay" class="overlay" aria-hidden="true">
    <button id="close-tasks" class="close-btn" aria-label="–ó–∞–∫—Ä—ã—Ç—å –∑–∞–¥–∞–Ω–∏—è">&times;</button>
    <h2>–ó–∞–¥–∞–Ω–∏—è</h2>
    <form id="add-task-form">
      <input type="text" id="task-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è" required />
      <input type="url" id="task-link" placeholder="–°—Å—ã–ª–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä /start)" required />
      <button type="submit">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ</button>
    </form>
    <ul id="tasks-list"></ul>
  </div>

<script>
(() => {
  const cylinder = document.getElementById('cylinder');
  const scoreDisplay = document.getElementById('score');

  let score = 0;
  let activeFace = null;
  let autoClickPower = 0;
  let clickMultiplier = 1;

  // –°–æ–∑–¥–∞–µ–º 3D —Ü–∏–ª–∏–Ω–¥—Ä —Å —Ü–∏—Ñ—Ä–∞–º–∏
  const numbers = [1,2,3,4,5,6,7,8];
  const facesCount = numbers.length;
  const radius = 80;
  const angleStep = 360 / facesCount;

  numbers.forEach((num, i) => {
    const face = document.createElement('div');
    face.classList.add('face');
    face.textContent = num;

    const rotateY = i * angleStep;
    face.style.transform = `rotateY(${rotateY}deg) translateZ(${radius}px)`;

    face.addEventListener('click', () => {
      if (activeFace) activeFace.classList.remove('active');
      face.classList.add('active');
      activeFace = face;

      score += num * clickMultiplier;
      updateScore();
    });

    cylinder.appendChild(face);
  });

  function updateScore() {
    scoreDisplay.textContent = `–û—á–∫–∏: ${score}`;
  }

  // –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä ‚Äî –ø—Ä–∏–±–∞–≤–ª—è–µ—Ç –æ—á–∫–∏ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
  setInterval(() => {
    if (autoClickPower > 0) {
      score += autoClickPower;
      updateScore();
    }
  }, 1000);

  // –ö–Ω–æ–ø–∫–∏ –∏ –æ–≤–µ—Ä–ª–µ–∏
  const shopBtn = document.getElementById('shop-btn');
  const tasksBtn = document.getElementById('tasks-btn');
  const shopOverlay = document.getElementById('shop-overlay');
  const tasksOverlay = document.getElementById('tasks-overlay');
  const closeShop = document.getElementById('close-shop');
  const closeTasks = document.getElementById('close-tasks');

  shopBtn.onclick = () => {
    shopOverlay.classList.add('visible');
    tasksOverlay.classList.remove('visible');
  };

  tasksBtn.onclick = () => {
    tasksOverlay.classList.add('visible');
    shopOverlay.classList.remove('visible');
  };

  closeShop.onclick = () => shopOverlay.classList.remove('visible');
  closeTasks.onclick = () => tasksOverlay.classList.remove('visible');

  // –ú–∞–≥–∞–∑–∏–Ω
  const shopList = document.getElementById('shop-list');
  const shopItems = [
    {
      id: 'autoClicker',
      name: '–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä',
      level: 0,
      basePrice: 50,
      effectDesc: '–î–æ–±–∞–≤–ª—è–µ—Ç +1 –æ—á–∫–æ –≤ —Å–µ–∫—É–Ω–¥—É –∑–∞ —É—Ä–æ–≤–µ–Ω—å',
      getPrice() {
        return Math.floor(this.basePrice * Math.pow(1.5, this.level));
      },
      buy() {
        if(score >= this.getPrice()) {
          score -= this.getPrice();
          this.level++;
          autoClickPower = this.level; // –º–æ—â–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä–∞ = —É—Ä–æ–≤–µ–Ω—å
          updateScore();
          renderShop();
        }
      }
    },
    {
      id: 'clickPower',
      name: '–£—Å–∏–ª–µ–Ω–∏–µ –∫–ª–∏–∫–∞ x2',
      level: 0,
      basePrice: 100,
      effectDesc: '–£–¥–≤–∞–∏–≤–∞–µ—Ç –æ—á–∫–∏ —Å –∫–ª–∏–∫–æ–≤ –∑–∞ —É—Ä–æ–≤–µ–Ω—å',
      getPrice() {
        return Math.floor(this.basePrice * Math.pow(2, this.level));
      },
      buy() {
        if(score >= this.getPrice()) {
          score -= this.getPrice();
          this.level++;
          clickMultiplier = 2 ** this.level; // –º–Ω–æ–∂–∏—Ç–µ–ª—å –∫–ª–∏–∫–∞
          updateScore();
          renderShop();
        }
      }
    }
  ];

  function renderShop() {
    shopList.innerHTML = '';
    shopItems.forEach(item => {
      const li = document.createElement('li');
      li.innerHTML = `
        <div>
          <strong>${item.name}</strong> (—É—Ä–æ–≤–µ–Ω—å: ${item.level})<br>
          <small>${item.effectDesc}</small>
        </div>
        <button>–ö—É–ø–∏—Ç—å –∑–∞ ${item.getPrice()}</button>
      `;
      const btn = li.querySelector('button');
      btn.onclick = () => {
        item.buy();
      };
      shopList.appendChild(li);
    });
  }

  renderShop();

  // –ó–∞–¥–∞–Ω–∏—è
  const tasksList = document.getElementById('tasks-list');
  const addTaskForm = document.getElementById('add-task-form');
  const taskNameInput = document.getElementById('task-name');
  const taskLinkInput = document.getElementById('task-link');

  let tasks = [];

  addTaskForm.addEventListener('submit', e => {
    e.preventDefault();
    const name = taskNameInput.value.trim();
    const link = taskLinkInput.value.trim();
    if (!name || !link) return;

    const task = { id: Date.now(), name, link };
    tasks.push(task);
    renderTasks();
    addTaskForm.reset();
  });

  function renderTasks() {
    tasksList.innerHTML = '';
    tasks.forEach(t => {
      const li = document.createElement('li');
      li.innerHTML = `
        <div>${t.name}</div>
        <button onclick="window.location.href='${t.link}'">–í—ã–ø–æ–ª–Ω–∏—Ç—å</button>
      `;
      tasksList.appendChild(li);
    });
  }
})();
</script>

</body>
</html>