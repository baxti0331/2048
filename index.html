<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Генератор QR-кодов</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  #qrcode { margin-top: 20px; }
  button { margin-top: 10px; padding: 10px 20px; font-size: 16px; }
  input, textarea { width: 100%; padding: 10px; font-size: 16px; }
</style>
</head>
<body>

<h1>Генератор QR-кодов</h1>
<label for="text-input">Введите текст или ссылку:</label>
<textarea id="text-input" rows="4" placeholder="Например, https://example.com"></textarea>
<button id="generate-btn">Сгенерировать QR-код</button>
<button id="download-btn" style="display:none;">Скачать QR-код</button>

<div id="qrcode"></div>

<!-- Подключаем библиотеку qrcode.js -->
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script>
  const generateBtn = document.getElementById('generate-btn');
  const downloadBtn = document.getElementById('download-btn');
  const textInput = document.getElementById('text-input');
  const qrCodeContainer = document.getElementById('qrcode');

  generateBtn.addEventListener('click', () => {
    const text = textInput.value.trim();
    if (!text) {
      alert('Пожалуйста, введите текст или ссылку');
      return;
    }
    qrCodeContainer.innerHTML = ''; // Очистить старый QR-код

    // Генерируем QR-код в виде SVG
    QRCode.toCanvas(text, { errorCorrectionLevel: 'H' }, function (err, canvas) {
      if (err) {
        alert('Ошибка при генерации QR-кода');
        return console.error(err);
      }
      qrCodeContainer.appendChild(canvas);
      downloadBtn.style.display = 'inline-block';
    });
  });

  downloadBtn.addEventListener('click', () => {
    const canvas = qrCodeContainer.querySelector('canvas');
    if (!canvas) return;

    const link = document.createElement('a');
    link.href = canvas.toDataURL('image/png');
    link.download = 'qrcode.png';
    link.click();
  });
</script>

</body>
</html>